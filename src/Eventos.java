import java.util.Date;

// A classe Eventos representa eventos que podem ocorrer em uma data espec√≠fica.
public class Eventos {

    // Atributos base
    String nome;
    Date data;
    Boolean eAcessivel;
    Ingresso ingresso;

    Ingresso[] vendasIngressos;

    // Contador para o n√∫mero de ingressos vendidos para este evento
    int numIngressos;

    // Limitador de ingressos que ser√° utilizado nas subclasses de Eventos
    int LIMITE_INGRESSOS;

    // Inicializando para calcular o total de cada tipo de ingresso
    private int totalNormal, totalMeia, totalVIP;

    // Constructor de Eventos
    public Eventos(String nome, Boolean eAcessivel, Ingresso ingresso) {
        this.nome = nome;
        this.data = new Date();
        this.eAcessivel = eAcessivel;
        this.ingresso = ingresso;

        // Inicializa um array para armazenar vendas de ingressos, necessario para imprimir os diferentes tipos juntos
        this.vendasIngressos = new Ingresso[1000];
        // Inicializa o n√∫mero de ingressos vendidos como 0, necessario para "extrato" depois
        this.numIngressos = 0;
        // Inicializa 0 n√∫mero limite de ingressos vendidos como 0, para obter seu limite real em cada subclasse de evento
        this.LIMITE_INGRESSOS = 0;


        // Inicializando a quantidade de ingressos para cada tipo
        int totalNormal = 0;
        int totalMeia = 0;
        int totalVIP = 0;
    }

    // M√©todo para obter o tipo de evento (ser√° implementado nas subclasses)
    public String getTipo() {
        return "Evento Inv√°lido";
    }

    // M√©todos para incrementar o total de vendas de cada tipo de ingresso
    public void incrementarTotalNormal() {
        totalNormal++;
    }
    public void incrementarTotalMeia() {
        totalMeia++;
    }
    public void incrementarTotalVIP() {
        totalVIP++;
    }

    // M√©todos para pegar o total de vendas de cada tipo de ingresso
    public int getTotalNormal() {
        return totalNormal;
    }

    public int getTotalMeia() {
        return totalMeia;
    }

    // M√©todo para obter o total de vendas de ingressos VIP
    public int getTotalVIP() {
        return totalVIP;
    }

    // M√©todo para verificar se o evento √© acess√≠vel ou n√£o e retornar uma mensagem correspondente
    public String eAcessivel() {
        if(eAcessivel) {
            return "Acessivel! üöÄüöÄ";
        } else {
            return "Nao acessivel! üò°üò°";
        }
    }

    // M√©todo para representar o objeto Eventos como uma string formatada

    public String toString() {
        return "Nome: " + this.nome + " \nData: " + this.data + "\n√â acess√≠vel? " + eAcessivel() + "\nIngresso: " + ingresso.toString();
    }

    // M√©todo para obter a quantidade de ingressos vendidos
    public int getNumIngressos() {
        return numIngressos;
    }

    // M√©todo para delimitar o limite dos ingressos dos Eventos
    public void VenderIngressos(Ingresso tipoIngresso){
        if(numIngressos >= LIMITE_INGRESSOS){
            System.out.println("Limite de ingressos atingido!");
        } else{
            // Salvando o ingresso vendido no array de ingressos
            vendasIngressos[numIngressos] = tipoIngresso;

            // Adiciona a quantidade de ingressos vendidos at√© atingir o limite
            numIngressos++;

            // Checando qual tipo de ingresso vai aumentar
            if(tipoIngresso instanceof  Ingresso.ingressoPadrao) {
                incrementarTotalNormal();
            } else if (tipoIngresso instanceof Ingresso.meiaEntrada) {
                incrementarTotalMeia();
            } else if (tipoIngresso instanceof  Ingresso.VIP) {
                incrementarTotalVIP();
            }
        }
    }

    public void imprimirExtrato() {
        String tipoEvento = getTipo(); // Obt√©m o tipo de evento
        System.out.println("Extrato do Evento: " + tipoEvento + " - " + this.nome);

        double receitaTotal = 0;

        // Loop para imprimir detalhes de cada ingresso vendido
        for (int i = 0; i < numIngressos; i++) {
            Ingresso ingresso = vendasIngressos[i];
            System.out.println(" " + ingresso.data + " | " + ingresso.getTipoIngresso() + " - " + ingresso.getPreco());
            receitaTotal += ingresso.getPreco();
        }

        System.out.println();
        System.out.println("Total de ingressos vendidos: " + numIngressos);
        System.out.println("Receita total gerada: " + receitaTotal);
    }


    public static class Filme extends Eventos{

        public Filme(String nome, Boolean eAcessivel, Ingresso ingresso){
            //Atributos da superclasse
            super(nome,eAcessivel, ingresso);

            // Define o limite de ingressos espec√≠fico para Filme
            this.LIMITE_INGRESSOS = 2;
        }

        @Override
        // M√©todo para obter o tipo de evento (ser√° implementado nas subclasses)
        public String getTipo() {
            return " Filme ";
        }
    }

    public static class Concerto extends Eventos{

        public Concerto(String nome, Boolean eAcessivel, Ingresso ingresso){
            //Atributos da superclasse
            super(nome,eAcessivel, ingresso);

            // Define o limite de ingressos espec√≠fico para Concerto
            this.LIMITE_INGRESSOS = 3;
        }

        @Override
        // M√©todo para obter o tipo de evento (ser√° implementado nas subclasses)
        public String getTipo() {
            return " Concerto ";
        }
    }

    public static class Teatro extends Eventos{

        public Teatro(String nome, Boolean eAcessivel, Ingresso ingresso){
            //Atributos da superclasse
            super(nome,eAcessivel, ingresso);

            // Define o limite de ingressos espec√≠fico para Teatro
            this.LIMITE_INGRESSOS = 1;
        }

        @Override
        // M√©todo para obter o tipo de evento (ser√° implementado nas subclasses)
        public String getTipo() {
            return " Teatro ";
        }
    }

}